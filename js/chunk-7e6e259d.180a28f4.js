(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e6e259d"],{1799:function(e,t,n){"use strict";var c=n("7a23"),a={"aria-label":"Page navigation",class:"mt-4 pt-5"},r={class:"pagination justify-content-center"},b=Object(c["n"])("a",{class:"page-link shadow-none",href:"#"},"上一頁",-1),l={class:"page-link shadow-none",href:"#",tabindex:"-1"},i=Object(c["n"])("a",{class:"page-link shadow-none pe-auto",href:"#"},"下一頁",-1);function o(e,t,n,o,u,j){return Object(c["F"])(),Object(c["j"])("nav",a,[Object(c["n"])("ul",r,[Object(c["n"])("li",{class:["page-item",{disabled:!o.page.has_pre}],onClick:t[1]||(t[1]=Object(c["fb"])((function(){return o.prevPage&&o.prevPage.apply(o,arguments)}),["prevent"]))},[b],2),(Object(c["F"])(!0),Object(c["j"])(c["b"],null,Object(c["L"])(o.page["total_pages"],(function(e){return Object(c["F"])(),Object(c["j"])("li",{class:["page-item",{active:o.page.current_page===e}],key:"page_".concat(e),onClick:Object(c["fb"])((function(t){return o.onPageClick(e)}),["prevent"])},[Object(c["n"])("a",l,Object(c["Q"])(e),1)],10,["onClick"])})),128)),Object(c["n"])("li",{class:["page-item pe-auto",{disabled:!o.page.has_next}],onClick:t[2]||(t[2]=Object(c["fb"])((function(){return o.nextPage&&o.nextPage.apply(o,arguments)}),["prevent"]))},[i],2)])])}var u={name:"pagination",props:["data"],setup:function(e,t){var n=t.emit,a=Object(c["J"])({});Object(c["bb"])(e.data,(function(e,t){Object.assign(a,e)}));var r=function(e){document.getElementById("app").scrollIntoView(),n("clickPage",e)},b=function(){a.has_next&&n("clickPage",a.current_page+1)},l=function(){a.has_pre&&n("clickPage",a.current_page-1)};return{nextPage:b,page:a,prevPage:l,onPageClick:r}}},j=n("d959"),O=n.n(j);const s=O()(u,[["render",o]]);t["a"]=s},"5be2":function(e,t,n){"use strict";n.r(t);var c=n("7a23"),a={class:"position-relative"},r=Object(c["n"])("h1",{class:"pt-4"},"訂單列表",-1),b={key:0,class:"spin-wrap"},l={key:1,class:"table-responsive"},i={class:"table text-nowrap table-striped"};function o(e,t,n,o,u,j){var O=Object(c["N"])("a-spin"),s=Object(c["N"])("Pagination"),d=Object(c["N"])("OrderPanel");return Object(c["F"])(),Object(c["j"])("section",a,[r,o.order.loading?(Object(c["F"])(),Object(c["j"])("div",b,[Object(c["n"])(O)])):(Object(c["F"])(),Object(c["j"])("div",l,[Object(c["n"])("table",i,[Object(c["n"])("thead",null,[Object(c["n"])("tr",null,[(Object(c["F"])(!0),Object(c["j"])(c["b"],null,Object(c["L"])(o.header,(function(e,t){return Object(c["F"])(),Object(c["j"])("th",{key:"header_".concat(t)},Object(c["Q"])(e),1)})),128))])]),Object(c["n"])("tbody",null,[(Object(c["F"])(!0),Object(c["j"])(c["b"],null,Object(c["L"])(o.order.list,(function(e,t){return Object(c["F"])(),Object(c["j"])("tr",{key:"order_".concat(t)},[Object(c["n"])("td",null,Object(c["Q"])(t+1),1),Object(c["n"])("td",null,Object(c["Q"])(e.create_at),1),Object(c["n"])("td",null,Object(c["Q"])(e.user.email),1),Object(c["n"])("td",null,[(Object(c["F"])(!0),Object(c["j"])(c["b"],null,Object(c["L"])(e.products,(function(e,t){return Object(c["F"])(),Object(c["j"])("div",{key:"product_".concat(t)},Object(c["Q"])(e.product.title)+" : "+Object(c["Q"])(e.qty)+" "+Object(c["Q"])(e.product.unit)+"/ "+Object(c["Q"])(e.total),1)})),128))]),Object(c["n"])("td",null,Object(c["Q"])(e.total),1),Object(c["n"])("td",null,Object(c["Q"])(e.is_paid?"是":"否"),1),Object(c["n"])("td",null,[Object(c["n"])("button",{type:"button",class:"btn btn-outline-dark me-1",onClick:function(t){return o.onMoreDetailsClick(e)}}," 檢視 ",8,["onClick"]),Object(c["n"])("button",{type:"button",class:"btn btn-outline-danger ms-1",onClick:function(t){return o.onDeletClick(e)}}," 刪除 ",8,["onClick"])])])})),128))])])])),Object(c["n"])(s,{data:o.page,onClickPage:o.getData},null,8,["data","onClickPage"]),Object(c["n"])(d,{ref:"panel",product:o.order},null,8,["product"])])}n("ac1f"),n("5319"),n("99af");var u=n("7804"),j=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),O={authorization:j},s="tp27933";function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;return u["a"].request({method:"get",headers:O,url:"api/".concat(t,"/admin/orders?"),params:{page:e}})}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;return u["a"].request({method:"delete",headers:O,url:"api/".concat(t,"/admin/order/").concat(e)})}n("b0c0");var f=Object(c["n"])("br",null,null,-1);function g(e,t,n,a,r,b){var l=Object(c["N"])("a-descriptions-item"),i=Object(c["N"])("a-badge"),o=Object(c["N"])("a-descriptions"),u=Object(c["N"])("a-drawer");return Object(c["F"])(),Object(c["j"])(u,{placement:a.placement,closable:!1,width:"50%",visible:a.visible,onClose:a.onClose},{default:Object(c["db"])((function(){return[Object(c["n"])(o,{title:"訂單詳情",bordered:""},{default:Object(c["db"])((function(){return[Object(c["n"])(l,{label:"姓名"},{default:Object(c["db"])((function(){return[Object(c["m"])(Object(c["Q"])(e.user.name),1)]})),_:1}),Object(c["n"])(l,{label:"電話"},{default:Object(c["db"])((function(){return[Object(c["m"])(Object(c["Q"])(e.user.tel),1)]})),_:1}),Object(c["n"])(l,{label:"Email"},{default:Object(c["db"])((function(){return[Object(c["m"])(Object(c["Q"])(e.user.email),1)]})),_:1}),Object(c["n"])(l,{label:"地址"},{default:Object(c["db"])((function(){return[Object(c["m"])(Object(c["Q"])(e.user.address),1)]})),_:1}),Object(c["n"])(l,{label:"Usage Time",span:2},{default:Object(c["db"])((function(){return[Object(c["m"])(Object(c["Q"])(e.paid_date),1)]})),_:1}),Object(c["n"])(l,{label:"Status",span:3},{default:Object(c["db"])((function(){return[Object(c["n"])(i,{status:e.is_paid?"processing":"error",text:e.is_paid?"已付款":"尚未付款"},null,8,["status","text"])]})),_:1}),Object(c["n"])(l,{label:"訂單編號",span:2},{default:Object(c["db"])((function(){return[Object(c["m"])(Object(c["Q"])(e.id),1)]})),_:1}),Object(c["n"])(l,{label:"總額"},{default:Object(c["db"])((function(){return[Object(c["m"])(Object(c["Q"])(e.total),1)]})),_:1}),Object(c["n"])(l,{label:"選購商品"},{default:Object(c["db"])((function(){return[(Object(c["F"])(!0),Object(c["j"])(c["b"],null,Object(c["L"])(e.products,(function(e,t,n){return Object(c["F"])(),Object(c["j"])("div",{key:"info_".concat(n),class:"text-left"},[Object(c["m"])(Object(c["Q"])(n+1)+". "+Object(c["Q"])(e.product.title)+" / "+Object(c["Q"])(e.qty)+" "+Object(c["Q"])(e.product.unit)+" ",1),f,Object(c["m"])(" 總計: "+Object(c["Q"])(e.total),1)])})),128))]})),_:1})]})),_:1})]})),_:1},8,["placement","visible","onClose"])}var m=n("5530"),v={name:"OrderPanel",props:{product:{type:Object,default:function(){return{}}}},setup:function(e){var t=Object(c["J"])({create_at:0,id:"",is_paid:!1,message:"",num:1,paid_date:0,products:{},total:0,user:{}}),n=Object(c["K"])("right"),a=Object(c["K"])(!1),r=function(){a.value=!0};Object(c["bb"])(e.product,(function(e){Object.assign(t,e.selected)}),{deep:!0});var b=function(){a.value=!1};return Object(m["a"])(Object(m["a"])({},Object(c["U"])(t)),{},{item:t,placement:n,visible:a,showDrawer:r,onClose:b})}},_=n("d959"),h=n.n(_);const k=h()(v,[["render",g]]);var Q=k,C=n("1799"),P=n("61dd"),w={name:"MerchantOrder",components:{Pagination:C["a"],OrderPanel:Q},setup:function(){var e=Object(c["J"])(["索引","購買時間","Email","購買款項","應付金額","是否付款","編輯"]);Object(c["C"])((function(){a()}));var t=Object(c["J"])({list:[],selected:{},loading:!1}),n=Object(c["J"])({total_pages:0,current_page:1,has_pre:"",has_next:""}),a=function(e){t.loading=!0,e&&(n.current_page=e),d(n.current_page).then((function(e){if(t.loading=!1,e){var c=e.data;t.list=c.orders,Object.assign(n,c.pagination)}}))},r=function(e){p(e.id).then((function(e){if(e){var t=e.data;P["a"].fire({icon:"success",title:t.message}),a()}}))},b=Object(c["K"])(null),l=function(e){t.selected=JSON.parse(JSON.stringify(e)),b.value.showDrawer()};return{panel:b,onMoreDetailsClick:l,onDeletClick:r,getData:a,page:n,order:t,header:e}}};const y=h()(w,[["render",o]]);t["default"]=y}}]);
//# sourceMappingURL=chunk-7e6e259d.180a28f4.js.map