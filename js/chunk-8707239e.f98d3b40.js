(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8707239e"],{"17ac":function(e,t,a){"use strict";a.r(t);var n=a("7a23"),c=Object(n["gb"])("data-v-23153748");Object(n["I"])("data-v-23153748");var r={class:"MerchantAddArticle px-1 px-sm-5 py-4"},o=Object(n["m"])("回到文章列表 "),i={key:0,class:"spin-wrap"},l={key:1},u={class:"bg-white mt-2 p-5 rounded"},d={class:"text-start pb-3 d-flex flex-column flex-md-row"},s=Object(n["n"])("label",{for:"active",class:"text-right me-4"},"是否顯示: ",-1),b={class:"text-start pb-3 position-relative d-flex flex-column flex-md-row "},f=Object(n["n"])("label",{for:"tag",class:"text-right me-4"},"文章標籤: ",-1),j={class:"d-inline-block d-flex flex-column flex-md-row"},p={key:0,class:"drawer"},m=Object(n["n"])("span",null,"添加文章標籤",-1),O={class:"d-flex flex-column flex-md-row "},g=Object(n["n"])("label",{for:"cover",class:"text-start me-4"},"展示封面: ",-1),v={class:"text-start"},h=Object(n["m"])("無封面"),w=Object(n["m"])("單圖"),x={key:1},k=Object(n["n"])("div",{class:"ant-upload-text"},"Upload",-1);Object(n["G"])();var y=c((function(e,t,a,y,L,U){var N=Object(n["N"])("font-awesome-icon"),q=Object(n["N"])("router-link"),C=Object(n["N"])("a-spin"),F=Object(n["N"])("Field"),_=Object(n["N"])("ErrorMessage"),M=Object(n["N"])("a-textarea"),A=Object(n["N"])("a-switch"),D=Object(n["N"])("a-tag"),T=Object(n["N"])("a-input"),V=Object(n["N"])("a-drawer"),$=Object(n["N"])("a-radio"),P=Object(n["N"])("a-radio-group"),z=Object(n["N"])("loading-outlined"),E=Object(n["N"])("plus-outlined"),I=Object(n["N"])("a-upload"),J=Object(n["N"])("Form");return Object(n["F"])(),Object(n["j"])("div",r,[Object(n["n"])(q,{to:{name:"MerchantArticleList"},class:"text-muted d-block text-start mb-4"},{default:c((function(){return[Object(n["n"])(N,{icon:"long-arrow-alt-left",class:"me-2"}),o]})),_:1}),Object(n["n"])(J,{ref:"form",class:"pe-5",onSubmit:y.onSubmit},{default:c((function(a){var r=a.errors;return[e.dataLoading?(Object(n["F"])(),Object(n["j"])("div",i,[Object(n["n"])(C)])):(Object(n["F"])(),Object(n["j"])("main",l,[Object(n["n"])(F,{name:"標題",type:"text",class:["form-control mb-3 rounded",{"is-invalid":r["標題"]}],rules:"required",modelValue:e.title,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.title=t}),placeholder:"輸入標題"},null,8,["class","modelValue"]),Object(n["n"])(_,{name:"標題",class:"invalid-feedback pb-1 text-start"}),Object(n["n"])(M,{validate:"'required|string|min:10'",class:[{"is-invalid":r["標題"]},"rounded "],value:e.content,"onUpdate:value":t[2]||(t[2]=function(t){return e.content=t}),placeholder:"請輸入文章內容","auto-size":{minRows:12,maxRows:20}},null,8,["class","value"])])),Object(n["n"])("section",u,[Object(n["n"])("div",d,[s,Object(n["n"])(A,{class:"w-20 w-lg-auto","checked-children":"開","un-checked-children":"關",checked:e.isPublic,"onUpdate:checked":t[3]||(t[3]=function(t){return e.isPublic=t})},null,8,["checked"])]),Object(n["n"])("div",b,[f,Object(n["n"])("div",j,[(Object(n["F"])(!0),Object(n["j"])(n["b"],null,Object(n["L"])(e.tags,(function(e,t){return Object(n["F"])(),Object(n["j"])(D,{class:"me-2 p-1 tag w-lg-auto mb-2 mb-lg-0 flex-none",closable:"",onClose:function(e){return y.onTagClick(t,!0)},key:"tag_' ".concat(e)},{default:c((function(){return[Object(n["m"])("# "+Object(n["Q"])(e),1)]})),_:2},1032,["onClose"])})),128)),Object(n["n"])("div",{class:"btn btn-outline-secondary p-1  w-20 w-lg-auto fs-6",onClick:t[4]||(t[4]=function(e){return y.showDrawer=!0})},[Object(n["n"])(N,{icon:"plus"})])]),y.showDrawer?(Object(n["F"])(),Object(n["j"])("div",p,[Object(n["n"])(V,{placement:"top",closable:!0,visible:y.showDrawer,"get-container":!1,"wrap-style":{position:"absolute"},onClose:t[6]||(t[6]=function(e){return y.showDrawer=!1})},{default:c((function(){return[m,Object(n["n"])(T,{value:y.tagValue,"onUpdate:value":t[5]||(t[5]=function(e){return y.tagValue=e}),placeholder:"按下enter即可新增",onPressEnter:y.onTagClick},null,8,["value","onPressEnter"])]})),_:1},8,["visible"])])):Object(n["k"])("",!0)]),Object(n["n"])("div",O,[g,Object(n["n"])("div",v,[Object(n["n"])(P,{value:e.isCover,"onUpdate:value":t[7]||(t[7]=function(t){return e.isCover=t}),class:"mb-3"},{default:c((function(){return[Object(n["n"])($,{value:1},{default:c((function(){return[h]})),_:1}),Object(n["n"])($,{value:2},{default:c((function(){return[w]})),_:1})]})),_:1},8,["value"]),2===e.isCover?(Object(n["F"])(),Object(n["j"])(I,{key:0,"file-list":e.fileList,"onUpdate:file-list":t[8]||(t[8]=function(t){return e.fileList=t}),name:"avatar","list-type":"picture-card",class:"avatar-uploader",customRequest:y.uploadImg,"show-upload-list":!1,"before-upload":y.beforeUpload},{default:c((function(){return[e.imageUrl?(Object(n["F"])(),Object(n["j"])("img",{key:0,src:e.imageUrl,alt:"預設圖片"},null,8,["src"])):(Object(n["F"])(),Object(n["j"])("div",x,[e.loading?(Object(n["F"])(),Object(n["j"])(z,{key:0})):(Object(n["F"])(),Object(n["j"])(E,{key:1})),k]))]})),_:1},8,["file-list","customRequest","before-upload"])):Object(n["k"])("",!0)])])]),Object(n["n"])("button",{type:"submit",class:"btn btn-danger mt-4 text-white",loading:e.sendLoading}," 送出 ",8,["loading"])]})),_:1},8,["onSubmit"])])})),L=a("5530"),U=(a("a434"),a("6c02")),N=a("9274"),q=a("764c"),C=a("61dd"),F=a("f64c"),_={name:"MerchantAddArticle",setup:function(){var e=Object(U["d"])(),t=Object(U["c"])(),a=Object(n["K"])(!1);Object(n["C"])((function(){t.params.id&&o(t.params.id)}));var c=Object(n["J"])({title:"",isPublic:!1,content:"",isCover:1,tags:[],create_at:1555459220,author:"alice",imageUrl:null}),r=Object(n["J"])({uploadLoading:!1,dataLoading:!1,sendLoading:!1}),o=function(e){r.dataLoading=!0,Object(N["e"])(e).then((function(e){if(r.dataLoading=!1,e.data.success){var t=e.data.article;Object.assign(c,t)}}))},i=function(){r.sendLoading=!0,t.params.id?l():u()},l=function(){1===c.isCover&&(c.imageUrl=null),Object(N["c"])(c).then((function(t){r.sendLoading=!1,t.data.success&&(C["a"].fire({icon:"success",title:"編輯成功"}),e.push({name:"MerchantArticleList"}))}))},u=function(){1===c.isCover&&(c.imageUrl=null),Object(N["a"])(c).then((function(t){r.sendLoading=!1,t.data.success&&(C["a"].fire({icon:"success",title:"加入成功"}),e.push({name:"MerchantArticleList"}))}))},d=Object(n["K"])(""),s=function(e,t){t?c.tags.splice(e,1):(c.tags.push(d.value),d.value="")},b=function(e){r.uploadLoading=!0;var t=e.file,a=new FormData;a.append("file-to-upload",t),Object(q["e"])(a).then((function(t){r.uploadLoading=!1;var a=t.data,n=a.imageUrl,o=a.success;o?c.imageUrl=n:e.target.value=""}))},f=function(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||F["a"].error("只允許上傳jpg,png格式!");var a=e.size/1024/1024<1;return a||F["a"].error("圖片必須小於 1MB!"),t&&a};return Object(L["a"])(Object(L["a"])(Object(L["a"])({beforeUpload:f,uploadImg:b,onTagClick:s,showDrawer:a,tagValue:d},Object(n["U"])(c)),Object(n["U"])(r)),{},{onSubmit:i})}},M=(a("4802"),a("d959")),A=a.n(M);const D=A()(_,[["render",y],["__scopeId","data-v-23153748"]]);t["default"]=D},"3b2b":function(e,t,a){},4802:function(e,t,a){"use strict";a("3b2b")},"764c":function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return u})),a.d(t,"c",(function(){return d})),a.d(t,"e",(function(){return s}));a("ac1f"),a("5319"),a("99af");var n=a("7804"),c=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),r={authorization:c},o="tp27933";function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return n["a"].request({method:"get",url:"api/".concat(t,"/admin/products"),headers:r,params:{page:e}})}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return n["a"].request({method:"delete",headers:r,url:"api/".concat(t,"/admin/product/").concat(e)})}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return n["a"].request({method:"post",headers:r,url:"api/".concat(t,"/admin/product"),data:{data:e}})}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return n["a"].request({method:"put",headers:r,url:"api/".concat(t,"/admin/product/").concat(e.id),data:{data:e}})}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return n["a"].request({method:"post",headers:r,url:"/api/".concat(t,"/admin/upload"),data:e})}},9274:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return u})),a.d(t,"e",(function(){return d})),a.d(t,"d",(function(){return s}));a("ac1f"),a("5319"),a("99af");var n=a("7804"),c=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),r={authorization:c},o="tp27933";function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return n["a"].request({method:"post",headers:r,url:"api/".concat(t,"/admin/article"),data:{data:e}})}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return n["a"].request({method:"put",headers:r,url:"api/".concat(t,"/admin/article/").concat(e.id),data:{data:e}})}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return n["a"].request({method:"delete",headers:r,url:"api/".concat(t,"/admin/article/").concat(e)})}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return n["a"].request({method:"get",headers:r,url:"api/".concat(t,"/admin/article/").concat(e)})}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return n["a"].request({method:"get",headers:r,url:"api/".concat(t,"/admin/articles"),params:{page:e}})}},a434:function(e,t,a){"use strict";var n=a("23e7"),c=a("23cb"),r=a("a691"),o=a("50c4"),i=a("7b0b"),l=a("65f0"),u=a("8418"),d=a("1dde"),s=d("splice"),b=Math.max,f=Math.min,j=9007199254740991,p="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!s},{splice:function(e,t){var a,n,d,s,m,O,g=i(this),v=o(g.length),h=c(e,v),w=arguments.length;if(0===w?a=n=0:1===w?(a=0,n=v-h):(a=w-2,n=f(b(r(t),0),v-h)),v+a-n>j)throw TypeError(p);for(d=l(g,n),s=0;s<n;s++)m=h+s,m in g&&u(d,s,g[m]);if(d.length=n,a<n){for(s=h;s<v-n;s++)m=s+n,O=s+a,m in g?g[O]=g[m]:delete g[O];for(s=v;s>v-n+a;s--)delete g[s-1]}else if(a>n)for(s=v-n;s>h;s--)m=s+n-1,O=s+a-1,m in g?g[O]=g[m]:delete g[O];for(s=0;s<a;s++)g[s+h]=arguments[s+2];return g.length=v-n+a,d}})}}]);
//# sourceMappingURL=chunk-8707239e.f98d3b40.js.map