{"version":3,"sources":["webpack:///./src/components/Pagination.vue","webpack:///./src/components/Pagination.vue?4ca8","webpack:///./src/views/Backend/Orders.vue","webpack:///./src/API/MerchantOrders.js","webpack:///./src/views/Backend/componments/OrderPanel.vue","webpack:///./src/views/Backend/componments/OrderPanel.vue?a2b2","webpack:///./src/views/Backend/Orders.vue?6cc3"],"names":["aria-label","class","href","tabindex","page","has_pre","prevPage","n","current_page","key","onPageClick","has_next","nextPage","name","props","setup","emit","data","newVal","oldValue","Object","assign","document","getElementById","scrollIntoView","__exports__","render","order","loading","header","item","idx","list","create_at","user","email","products","product","title","qty","unit","total","is_paid","type","onMoreDetailsClick","onDeletClick","getData","ref","token","cookie","replace","headers","authorization","process","GetOrders","path","service","request","method","url","params","DeletOrder","ID","placement","closable","width","visible","onClose","bordered","label","tel","address","span","paid_date","status","text","id","index","default","message","num","showDrawer","value","selected","deep","components","Pagination","OrderPanel","total_pages","pageMoves","then","res","orders","pagination","fire","icon","panel","JSON","parse","stringify"],"mappings":"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","file":"js/chunk-7e6e259d.180a28f4.js","sourcesContent":["<template>\n  <nav aria-label=\"Page navigation\" class=\"mt-4 pt-5\">\n    <ul class=\"pagination justify-content-center\">\n      <li\n        class=\"page-item\"\n        :class=\"{ disabled: !page.has_pre }\"\n        @click.prevent=\"prevPage\"\n      >\n        <a class=\"page-link shadow-none\" href=\"#\">上一頁</a>\n      </li>\n      <li\n        class=\"page-item\"\n        :class=\"{ active: page.current_page === n }\"\n        v-for=\"n in page['total_pages']\"\n        :key=\"`page_${n}`\"\n        @click.prevent=\"onPageClick(n)\"\n      >\n        <a class=\"page-link shadow-none\" href=\"#\" tabindex=\"-1\">{{ n }}</a>\n      </li>\n      <li\n        class=\"page-item pe-auto\"\n        :class=\"{ disabled: !page.has_next }\"\n        @click.prevent=\"nextPage\"\n      >\n        <a class=\"page-link shadow-none pe-auto\" href=\"#\">下一頁</a>\n      </li>\n    </ul>\n  </nav>\n</template>\n\n<script>\nimport { reactive, watch } from 'vue'\n\nexport default {\n  name: 'pagination',\n  props: ['data'],\n  setup (props, { emit }) {\n    const page = reactive({})\n    watch(props.data, (newVal, oldValue) => {\n      Object.assign(page, newVal)\n    })\n    const onPageClick = n => {\n      document.getElementById('app').scrollIntoView()\n      emit('clickPage', n)\n    }\n    const nextPage = () => {\n      if (!page.has_next) return\n      emit('clickPage', page.current_page + 1)\n    }\n    const prevPage = () => {\n      if (!page.has_pre) return\n      emit('clickPage', page.current_page - 1)\n    }\n    return { nextPage, page, prevPage, onPageClick }\n  }\n}\n</script>\n","import { render } from \"./Pagination.vue?vue&type=template&id=63941cfe\"\nimport script from \"./Pagination.vue?vue&type=script&lang=js\"\nexport * from \"./Pagination.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\USER\\\\Downloads\\\\vue-RWD-ticket-master\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <section class=\"position-relative\">\n    <h1 class=\"pt-4\">訂單列表</h1>\n    <div class=\"spin-wrap\" v-if=\"order.loading\">\n      <a-spin />\n    </div>\n    <div class=\"table-responsive\" v-else>\n      <table class=\"table text-nowrap table-striped\">\n        <thead>\n          <tr>\n            <th v-for=\"(item, idx) in header\" :key=\"`header_${idx}`\">\n              {{ item }}\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"(item, idx) in order.list\" :key=\"`order_${idx}`\">\n            <td>{{ idx + 1 }}</td>\n            <td>{{ item.create_at }}</td>\n            <td>{{ item.user.email }}</td>\n            <td>\n              <div\n                v-for=\"(product, idx) in item.products\"\n                :key=\"`product_${idx}`\"\n              >\n                {{ product.product.title }} : {{ product.qty }}\n                {{ product.product.unit }}/ {{ product.total }}\n              </div>\n            </td>\n            <td>{{ item.total }}</td>\n            <td>{{ item.is_paid ? \"是\" : \"否\" }}</td>\n            <td>\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-dark me-1\"\n                @click=\"onMoreDetailsClick(item)\"\n              >\n                檢視\n              </button>\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-danger ms-1\"\n                @click=\"onDeletClick(item)\"\n              >\n                刪除\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <Pagination :data=\"page\" @clickPage=\"getData\" />\n    <OrderPanel ref=\"panel\" :product=\"order\" />\n  </section>\n</template>\n\n<script>\nimport { onMounted, reactive, ref } from 'vue'\n\nimport { GetOrders, DeletOrder } from '@/API/MerchantOrders'\n\nimport OrderPanel from './componments/OrderPanel.vue'\nimport Pagination from '@components/Pagination.vue'\nimport { Toast } from '@/utils/UseSwal'\n\nexport default {\n  name: 'MerchantOrder',\n  components: {\n    Pagination,\n    OrderPanel\n  },\n  setup () {\n    const header = reactive([\n      '索引',\n      '購買時間',\n      'Email',\n      '購買款項',\n      '應付金額',\n      '是否付款',\n      '編輯'\n    ])\n    onMounted(() => {\n      getData()\n    })\n    const order = reactive({ list: [], selected: {}, loading: false })\n    const page = reactive({\n      total_pages: 0,\n      current_page: 1,\n      has_pre: '',\n      has_next: ''\n    })\n    const getData = pageMoves => {\n      order.loading = true\n      if (pageMoves) page.current_page = pageMoves\n      GetOrders(page.current_page).then(res => {\n        order.loading = false\n        if (!res) return\n        const data = res.data\n        order.list = data.orders\n        Object.assign(page, data.pagination)\n      })\n    }\n    const onDeletClick = item => {\n      DeletOrder(item.id).then(res => {\n        if (!res) return\n        const data = res.data\n        Toast.fire({ icon: 'success', title: data.message })\n        getData()\n      })\n    }\n    const panel = ref(null)\n    const onMoreDetailsClick = item => {\n      order.selected = JSON.parse(JSON.stringify(item))\n      panel.value.showDrawer()\n    }\n    return {\n      panel,\n      onMoreDetailsClick,\n      onDeletClick,\n      getData,\n      page,\n      order,\n      header\n    }\n  }\n}\n</script>\n","import service from './request.js'\nconst token = document.cookie.replace(\n  /(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/,\n  '$1'\n)\nconst headers = { authorization: token }\nconst user = process.env.VUE_APP_PATH\n\n// 獲取訂單列表 /api/:api_path/admin/orders?page=:page\nexport function GetOrders (page, path = user) {\n  return service.request({\n    method: 'get',\n    headers,\n    url: `api/${path}/admin/orders?`,\n    params: { page }\n  })\n}\n// api/:api_path/admin/order/:id\nexport function DeletOrder (ID, path = user) {\n  return service.request({\n    method: 'delete',\n    headers,\n    url: `api/${path}/admin/order/${ID}`\n  })\n}\n","<template>\n  <a-drawer\n    :placement=\"placement\"\n    :closable=\"false\"\n    width=\"50%\"\n    :visible=\"visible\"\n    @close=\"onClose\"\n  >\n    <a-descriptions title=\"訂單詳情\" bordered>\n      <a-descriptions-item label=\"姓名\">{{ user.name }}</a-descriptions-item>\n      <a-descriptions-item label=\"電話\">{{ user.tel }}</a-descriptions-item>\n      <a-descriptions-item label=\"Email\">{{ user.email }}</a-descriptions-item>\n      <a-descriptions-item label=\"地址\">{{ user.address }}</a-descriptions-item>\n      <a-descriptions-item label=\"Usage Time\" :span=\"2\">\n        {{ paid_date }}\n      </a-descriptions-item>\n      <a-descriptions-item label=\"Status\" :span=\"3\">\n        <a-badge\n          :status=\"is_paid ? 'processing' : 'error'\"\n          :text=\"is_paid ? '已付款' : '尚未付款'\"\n        />\n      </a-descriptions-item>\n      <a-descriptions-item label=\"訂單編號\" :span=\"2\">\n        {{ id }}\n      </a-descriptions-item>\n      <a-descriptions-item label=\"總額\">{{ total }}</a-descriptions-item>\n      <a-descriptions-item label=\"選購商品\">\n        <div\n          v-for=\"(item, key, index) in products\"\n          :key=\"`info_${index}`\"\n          class=\"text-left\"\n        >\n          {{ index + 1 }}. {{ item.product.title }} / {{ item.qty }}\n          {{ item.product.unit }}\n          <br />\n          總計: {{ item.total }}\n        </div>\n      </a-descriptions-item>\n    </a-descriptions>\n  </a-drawer>\n</template>\n\n<script>\nimport { reactive, ref, watch, toRefs } from 'vue'\n\nexport default {\n  name: 'OrderPanel',\n  props: {\n    product: {\n      type: Object,\n      default () {\n        return {}\n      }\n    }\n  },\n  setup (props) {\n    const item = reactive({\n      create_at: 0,\n      id: '',\n      is_paid: false,\n      message: '',\n      num: 1,\n      paid_date: 0,\n      products: {},\n      total: 0,\n      user: {}\n    })\n    const placement = ref('right')\n    const visible = ref(false)\n    const showDrawer = () => {\n      visible.value = true\n    }\n    watch(\n      props.product,\n      (newVal) => {\n        Object.assign(item, newVal.selected)\n      },\n      { deep: true }\n    )\n    const onClose = () => {\n      visible.value = false\n    }\n\n    return {\n      ...toRefs(item),\n      item,\n      placement,\n      visible,\n      showDrawer,\n      onClose\n    }\n  }\n}\n</script>\n","import { render } from \"./OrderPanel.vue?vue&type=template&id=574d78a8\"\nimport script from \"./OrderPanel.vue?vue&type=script&lang=js\"\nexport * from \"./OrderPanel.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\USER\\\\Downloads\\\\vue-RWD-ticket-master\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Orders.vue?vue&type=template&id=57724d37\"\nimport script from \"./Orders.vue?vue&type=script&lang=js\"\nexport * from \"./Orders.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\USER\\\\Downloads\\\\vue-RWD-ticket-master\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}